<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Road</title>
    <link rel="stylesheet" type="text/css" href="" />
    <script type="text/javascript" src="data.js"></script>
    <style type="text/css">
        canvas {
            border: 1px solid red;
            background-color: #100c2a;
        }
    </style>
    <script type="text/javascript">

    </script>
</head>

<body>
    <canvas id="canvas" width="1500" height="2000"></canvas>
    <script type="text/javascript">
        var radius = 5;
        var delt = 0.1;
        function draw() {
            const canvas = document.getElementById("canvas");
            if (canvas.getContext) {
                const ctx = canvas.getContext('2d');
                ctx.clearRect(0, 0, 1500, 2000); // 清除画布
                ctx.lineWidth = 0.6;
                for (const item in roadData) {
                    if (Object.hasOwnProperty.call(roadData, item)) {
                        const roadArr = roadData[item].edge;
                        ctx.strokeStyle = '#3d77d4';
                        ctx.beginPath();
                        renderRoad(roadArr, ctx);
                    }
                }
                const vehicleData = otherData.veh;
                for (const item in vehicleData) {
                    if (Object.hasOwnProperty.call(vehicleData, item)) {
                        const vehicleItem = vehicleData[item];
                        for (const key in vehicleItem) {
                            if (Object.hasOwnProperty.call(vehicleItem, key)) {
                                const element = vehicleItem[key];
                                const pos = element.pos;
                                renderVehicle(pos, ctx);
                            }
                        }
                    }
                }
            }
            radius += delt;
            if (radius >= 8 || radius <= 5) {
                delt = -delt
            }
        }
        setInterval(() => { draw() }, 40);
        function renderRoad(roadArr, ctx) {
            for (let index = 0; index < roadArr.length; index++) {
                const element = roadArr[index];
                index === 0 ? ctx.moveTo(element[0], element[1]) : ctx.lineTo(element[0], element[1]);
            }
            ctx.stroke();
        }
        function renderVehicle(pos, ctx) {
            ctx.beginPath();
            ctx.fillStyle = "rgba(124, 255, " + Math.floor(Math.random() * 255) + ", " + 1 + ")";
            ctx.moveTo(pos[0], pos[1]);
            ctx.arc(pos[0], pos[1], radius, 0, Math.PI * 2, true);
            ctx.fill();
        }
    </script>
</body>

</html>